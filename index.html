<!DOCTYPE html><html lang="es"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Flappy Bird</title><link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet"/><style>
body{margin:0;background:#70c5ce;overflow:hidden;font-family:Arial,sans-serif;display:flex;justify-content:center;align-items:center;height:100vh}
#gameContainer{position:relative;width:90vw;max-width:500px;aspect-ratio:2/3;border:2px solid #000;background:#70c5ce}
canvas{display:block;width:100%;height:100%;background:#70c5ce}
#menu{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;background-color:#70c5ce;z-index:10;font-family:'Press Start 2P',sans-serif;border:2px solid #000}
#menu button{margin:10px;padding:12px 24px;font-family:'Press Start 2P',sans-serif;font-size:14px;cursor:pointer;background:#ffcc00;border:4px solid #000;color:#000;text-transform:uppercase;box-shadow:3px 3px #000;transition:all 0.15s ease-in-out}
#menu button:hover{background:#ffe066;transform:translate(-2px,-2px);box-shadow:5px 5px #000}
#menu button:active{transform:translate(2px,2px);box-shadow:1px 1px #000}
#pauseButton{position:absolute;top:10px;left:10px;z-index:20;background:#ffcc00;border:3px solid #000;font-size:20px;font-family:'Press Start 2P',sans-serif;cursor:pointer;padding:4px 10px;border-radius:6px;box-shadow:2px 2px #000}
#pauseButton:hover{background:#ffe066}
</style></head><body><div id="gameContainer"><div id="menu"><h1 style="color:yellow;text-shadow:2px 2px 0 black;">FLAPPY BIRD</h1><button id="btnPlay">Jugar</button><button id="btnOptions">Opciones</button><button id="btnExit">Salir</button></div><canvas id="gameCanvas" width="400" height="600"></canvas><button id="pauseButton" style="display:none;">⏸</button></div><script>
const canvas=document.getElementById("gameCanvas"),ctx=canvas.getContext("2d"),menu=document.getElementById("menu"),btnPlay=document.getElementById("btnPlay"),btnOptions=document.getElementById("btnOptions"),btnExit=document.getElementById("btnExit"),clickSound=new Audio("click.wav"),musicMenu=new Audio("music_menu.wav"),musicFlight=new Audio("music_flight.wav"),musicDeath=new Audio("music_death.wav"),musicGameOver=new Audio("music_gameover.wav");musicMenu.loop=true;ctx.imageSmoothingEnabled=false;const bgImg=new Image();bgImg.src="background.png";const birdImg=new Image();birdImg.src="bird.png";const pipeImg=new Image();pipeImg.src="pipe.png";const jumpSound=new Audio("jump.wav"),pointSound=new Audio("point.wav"),hitSound=new Audio("hit.wav");const gravity=.6,jumpStrength=-10,terminalVelocity=12;let bird={x:80,y:200,width:40,height:30,velocity:0},pipes=[],score=0,pipeCount=0,gameOver=false,gameStarted=false,bgX=0,retryAlpha=0,retryFadeDir=1,waitingForRetry=false,animationFrameId,gameOverMusicTimeout=null,isPaused=false;function getBirdHitbox(){const a=6,b=4;return{x:bird.x+a,y:bird.y+b,width:bird.width-2*a,height:bird.height-2*b}}function playClick(){clickSound.currentTime=0;clickSound.play()}function addHoverSound(a){a.addEventListener("mouseenter",()=>{playClick()})}function drawGameOverScreen(){const a=280,b=150,c=(canvas.width-a)/2,d=(canvas.height-b)/2;ctx.fillStyle="#000",ctx.strokeStyle="#fff",ctx.lineWidth=4,ctx.fillRect(c,d,a,b),ctx.strokeRect(c,d,a,b),ctx.font="12px 'Press Start 2P'",ctx.fillStyle="#fff",ctx.textAlign="center",ctx.fillText("GAME OVER!",canvas.width/2,d+50),ctx.fillText("Puntuación: "+score,canvas.width/2,d+90),retryAlpha+=.03*retryFadeDir,retryAlpha>=1?(retryAlpha=1,retryFadeDir=-1):retryAlpha<=0&&(retryAlpha=0,retryFadeDir=1),ctx.globalAlpha=retryAlpha,ctx.font="10px 'Press Start 2P'",ctx.strokeStyle="black",ctx.fillStyle="white",ctx.lineWidth=2,ctx.strokeText("Inténtalo de nuevo",canvas.width/2,canvas.height-40),ctx.fillText("Inténtalo de nuevo",canvas.width/2,canvas.height-40),ctx.globalAlpha=1}function drawBackground(){bgX-=1,bgX<=-canvas.width&&(bgX=0),ctx.drawImage(bgImg,Math.floor(bgX),0,canvas.width,canvas.height),ctx.drawImage(bgImg,Math.floor(bgX+canvas.width),0,canvas.width,canvas.height)}function drawBird(a=bird.y){ctx.drawImage(birdImg,bird.x,a,bird.width,bird.height)}function drawPipes(){for(let a of pipes){ctx.save(),ctx.translate(a.x+a.width/2,a.top.y+a.top.height),ctx.scale(1,-1),ctx.drawImage(pipeImg,-a.width/2,0,a.width,a.top.height),ctx.restore(),ctx.drawImage(pipeImg,a.x,a.bottom.y,a.width,a.bottom.height)}}function getGapSize(){if(pipeCount<20)return 180;const a=100,b=180,c=Math.min(1,(pipeCount-20)/30);return b-(b-a)*c}function drawStartScreenAnimation(){let a=0,b=1,c=0,d=1;!function e(){ctx.clearRect(0,0,canvas.width,canvas.height),drawBackground(),a>10?b=-1:a<-10&&(b=1),a+=.5*b,drawBird(bird.y+a),ctx.font="30px 'Press Start 2P'",ctx.fillStyle="yellow",ctx.strokeStyle="black",ctx.lineWidth=4,ctx.textAlign="center",ctx.strokeText("FLAPPY BIRD",canvas.width/2,150),ctx.fillText("FLAPPY BIRD",canvas.width/2,150),c+=.02*d,c>=1?(c=1,d=-1):c<=0&&(c=0,d=1),ctx.globalAlpha=c,ctx.font="10px 'Press Start 2P'",ctx.fillStyle="white",ctx.strokeStyle="black",ctx.lineWidth=2,ctx.strokeText("Toca para jugar",canvas.width/2,450),ctx.fillText("Toca para jugar",canvas.width/2,450),ctx.globalAlpha=1,!gameStarted&&requestAnimationFrame(e)}()}function startGame(){document.getElementById("pauseButton").style.display="block",gameStarted=true,bird={x:80,y:200,width:40,height:30,velocity:0},pipes=[],score=0,pipeCount=0,gameOver=false,update()}function goToStartScreen(){cancelAnimationFrame(animationFrameId),gameOverMusicTimeout&&(clearTimeout(gameOverMusicTimeout),gameOverMusicTimeout=null),musicGameOver.pause(),musicFlight.pause(),musicDeath.pause(),musicGameOver.currentTime=0,musicFlight.currentTime=0,musicDeath.currentTime=0,musicMenu.currentTime=0,musicMenu.play(),bird={x:80,y:200,width:40,height:30,velocity:0},pipes=[],score=0,pipeCount=0,gameOver=false,gameStarted=false,waitingForRetry=false,drawStartScreenAnimation()}function update(){if(gameOver)return ctx.fillStyle="black",ctx.fillRect(0,0,canvas.width,canvas.height),drawGameOverScreen(),waitingForRetry=true,animationFrameId=requestAnimationFrame(update),void 0;if(isPaused)return animationFrameId=requestAnimationFrame(update),void 0;ctx.clearRect(0,0,canvas.width,canvas.height),drawBackground(),bird.velocity+=gravity,bird.velocity>terminalVelocity&&(bird.velocity=terminalVelocity),bird.y+=bird.velocity,(0===pipes.length||pipes[pipes.length-1].x<200)&&(()=>{const a=getGapSize(),b=Math.floor(Math.random()*(canvas.height-a)),c=canvas.height-a-b;pipes.push({x:canvas.width,width:50,top:{y:0,height:b},bottom:{y:b+a,height:c},gap:a}),pipeCount++})(),pipes.forEach(pipe=>{pipe.x-=2;const a=getBirdHitbox(),b=a.x<pipe.x+pipe.width&&a.x+a.width>pipe.x&&a.y<pipe.top.y+pipe.top.height,c=a.x<pipe.x+pipe.width&&a.x+a.width>pipe.x&&a.y+a.height>pipe.bottom.y;(b||c)&&(hitSound.play(),gameOver=true,document.getElementById("pauseButton").style.display="none",musicFlight.pause(),musicDeath.currentTime=0,musicDeath.play(),gameOverMusicTimeout=setTimeout(()=>musicGameOver.play(),1e3)),!pipe.counted&&pipe.x+pipe.width<bird.x&&(score++,pipe.counted=true,pointSound.play())}),drawBird(),drawPipes(),ctx.font="bold 36px Arial",ctx.fillStyle="white",ctx.strokeStyle="black",ctx.lineWidth=6,ctx.textAlign="center",ctx.strokeText(score,canvas.width/2,50),ctx.fillText(score,canvas.width/2,50),ctx.textAlign="start",animationFrameId=requestAnimationFrame(update)}function flap(){if(isPaused)return;gameStarted?(bird.velocity=jumpStrength,jumpSound.currentTime=0,jumpSound.play()):(startGame(),musicMenu.pause(),musicFlight.currentTime=0,musicFlight.loop=true,musicFlight.play())}
document.addEventListener("keydown",e=>{if(isPaused&&("Space"===e.code||" "===e.key))return e.preventDefault(),void 0;if(waitingForRetry&&("Space"===e.code||" "===e.key))return void goToStartScreen();("Space"===e.code||" "===e.key)&&flap()}),document.addEventListener("keydown",e=>{gameStarted&&!gameOver&&("KeyP"===e.code||"p"===e.key.toLowerCase())&&togglePause()}),document.addEventListener("keydown",e=>{"pauseButton"===document.activeElement.id&&"Space"===e.code&&e.preventDefault()}),canvas.addEventListener("touchstart",()=>{waitingForRetry?goToStartScreen():flap()}),[btnPlay,btnOptions,btnExit].forEach(addHoverSound),btnPlay.addEventListener("click",()=>{playClick(),menu.style.display="none",drawStartScreenAnimation(),musicGameOver.pause(),musicFlight.pause(),musicDeath.pause(),musicMenu.currentTime=0,musicMenu.play()}),btnOptions.addEventListener("click",()=>{playClick(),alert("Opciones próximamente...")}),btnExit.addEventListener("click",()=>{playClick(),window.close()}),window.onload=()=>{menu.style.display="flex";function a(){const a=document.getElementById("gameContainer").getBoundingClientRect();canvas.width=a.width,canvas.height=a.height}window.addEventListener("resize",a),a();function b(){musicMenu.play(),document.removeEventListener("click",b),document.removeEventListener("keydown",b)}document.addEventListener("click",b),document.addEventListener("keydown",b)};function togglePause(){isPaused=!isPaused,isPaused?(cancelAnimationFrame(animationFrameId),musicFlight.pause(),document.getElementById("pauseButton").innerText="▶"):(musicFlight.play(),animationFrameId=requestAnimationFrame(update),document.getElementById("pauseButton").innerText="⏸")}document.getElementById("pauseButton").addEventListener("click",e=>{e.target.blur(),togglePause()});
</script></body></html>
